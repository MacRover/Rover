<?xml version='1.0'?>

<robot name="arm" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:property name="mass_base" value="2" />
  <xacro:property name="mass_upper_arm" value="5" />
  <xacro:property name="mass_forearm" value="2" />
  <xacro:property name="mass_wrist" value="2" />
  <xacro:property name="mass_claw_base" value="0.5" />
  <xacro:property name="mass_claw" value="1" />

  <xacro:include filename="$(find simulation)/robot/arm.gazebo" />
  <!-- <origin rpy="0 0 1.5707" xyz="0 0 0"/> -->
  <link name="world"/>

  <link name='base'>
    <inertial>
      <mass value="1.0"/>
      <origin xyz="0 0 0.047" rpy=" 0 0 0"/>
      <inertia
        ixx="${mass_base / 12.0 * (0.0785*0.0785 + 0.0953*0.0953)}" ixy="0.0" ixz="0.0"
        iyy="${mass_base / 12.0 * (0.0953*0.0953 + 0.0785*0.0785)}" iyz="0.0"
        izz="${mass_base / 12.0 * (0.0785*0.0785 + 0.0785*0.0785)}"/>
    </inertial>

    <collision name='collision'>
      <!-- <origin rpy="0.0 0 0" xyz="0 0 0.0477"/> -->
      <geometry>
        <!-- <box size="0.0422 0.0785 0.0953"/> -->
        <mesh filename="package://simulation/robot/arm_parts/base.dae"/>
      </geometry>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- <box size="0.0422 0.0785 0.0953"/> -->
        <mesh filename="package://simulation/robot/arm_parts/base.dae"/>
      </geometry>
    </visual>
  </link>

  <link name='upper_arm'>
    <collision name='collision'>
      <!-- <origin rpy="0 0 0" xyz="0 0 0.253"/> -->
      <origin rpy="0 0 0" xyz="0 0 -0.0216"/>
      <geometry>
        <!-- <box size="0.0432 0.0594 0.507"/> -->
        <mesh filename="package://simulation/robot/arm_parts/upper_arm.dae"/>
      </geometry>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 -0.0216"/>
      <geometry>
        <!-- <box size="0.0432 0.0594 0.507"/> -->
        <mesh filename="package://simulation/robot/arm_parts/upper_arm.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="${mass_upper_arm}"/>
      <origin xyz="0 0 0.253" rpy=" 0 0 0"/>
      <inertia
          ixx="${mass_upper_arm / 12.0 * (0.0594*0.0594 + 0.507*0.507)}" ixy="0" ixz="0"
          iyy="${mass_upper_arm / 12.0 * (0.507*0.507 + 0.0594*0.0594)}" iyz="0"
          izz="${mass_upper_arm / 12.0 * (0.0594*0.0594 + 0.0594*0.0594)}"
      />
    </inertial>
  </link>

  <link name='forearm'>
    <collision name='collision'>
      <origin rpy="0 0 0" xyz="0 0 0.118"/>
      <geometry>
        <box size="0.0424 0.0785 0.237"/>
      </geometry>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 -0.0216"/>
      <geometry>
        <!-- <box size="0.0424 0.0785 0.237"/> -->
        <mesh filename="package://simulation/robot/arm_parts/forearm.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="${mass_forearm}"/>
      <origin xyz="0 0 0.118" rpy=" 0 0 0"/>
      <inertia
        ixx="${mass_forearm / 12.0 * (0.0785*0.0785 + 0.237*0.237)}" ixy="0.0" ixz="0.0"
        iyy="${mass_forearm / 12.0 * (0.237*0.237 + 0.0785*0.0785)}" iyz="0.0"
        izz="${mass_forearm / 12.0 * (0.0785*0.0785 + 0.0785*0.0785)}"/>
    </inertial>
  </link>

  <link name='wrist'>
    <collision name='collision'>
      <origin rpy="0 0 0" xyz="0 0 0.0217"/>
      <geometry>
        <box size="0.0432 0.0595 0.0865"/>
      </geometry>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 -0.0064"/>
      <geometry>
        <!-- <box size="0.0432 0.0595 0.0865"/> -->
        <mesh filename="package://simulation/robot/arm_parts/wrist.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="${mass_wrist}"/>
      <origin xyz="0 0 0.0217" rpy=" 0 0 0"/>
      <inertia
        ixx="${mass_wrist / 12.0 * (0.0595*0.0595 + 0.0865*0.0865)}" ixy="0.0" ixz="0.0"
        iyy="${mass_wrist / 12.0 * (0.0865*0.0865 + 0.0595*0.0595)}" iyz="0.0"
        izz="${mass_wrist / 12.0 * (0.0595*0.0595 + 0.0595*0.0595)}"/>
    </inertial>
  </link>

  <link name='claw_base'>
    <collision name='collision'>
      <origin rpy="0 0 0" xyz="0 0 0.05"/>
      <geometry>
        <box size="0.0064 0.1045 0.1"/>
      </geometry>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- <box size="0.0424 0.0785 0.237"/> -->
        <mesh filename="package://simulation/robot/arm_parts/claw_base.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="${mass_claw_base}"/>
      <origin xyz="0 0 0.05" rpy=" 0 0 0"/>
      <inertia
        ixx="${mass_claw_base / 12.0 * (0.1045*0.1045 + 0.1*0.1)}" ixy="0.0" ixz="0.0"
        iyy="${mass_claw_base / 12.0 * (0.1*0.1 + 0.1045*0.1045)}" iyz="0.0"
        izz="${mass_claw_base / 12.0 * (0.1045*0.1045 + 0.1045*0.1045)}"/>
    </inertial>
  </link>

  <link name='claw_right'>
    <collision name='collision'>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://simulation/robot/arm_parts/claw.dae"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <mu>1.4</mu>
            <mu2>1.4</mu2>
          </ode>
        </friction>
      </surface>
      <contact>
        <ode>
          <mu>1.4</mu>
          <mu2>1.4</mu2>
          <min_depth>0.003</min_depth>
          <max_vel>0</max_vel>
        </ode>
      </contact>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- <box size="0.0424 0.0785 0.237"/> -->
        <mesh filename="package://simulation/robot/arm_parts/claw.dae"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="${mass_claw}"/>
      <origin xyz="0.000025 0.019708 0.040881" rpy="0 0 0"/>
      <!-- | 61.941238 0.000016 0.000021 |
      | 0.000016 46.885822 -23.824060 |
      | 0.000021 -23.824060 15.744728 |
      | ixx ixy ixz |
      | ixy iyy iyz |
      | ixz iyz izz | -->
      <inertia
        ixx="${mass_claw / 0.00000743 * (61.941238*1.0e-10)}" ixy="0.0" ixz="0.0"
        iyy="${mass_claw / 0.00000743 * (46.885822*1.0e-10)}" iyz="${mass_claw / 0.0000743 * (-23.824060*1.0e-10)}" izz="${mass_claw / 0.0000743 * (15.744728*1.0e-10)}"/>
    </inertial>
  </link>

  <link name='claw_left'>
    <collision name='collision'>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://simulation/robot/arm_parts/claw.dae"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <mu>1.4</mu>
            <mu2>1.4</mu2>
          </ode>
        </friction>
      </surface>
      c<contact>
        <ode>
          <mu>1.4</mu>
          <mu2>1.4</mu2>
          <min_depth>0.003</min_depth>
          <max_vel>0</max_vel>
        </ode>
      </contact>
    </collision>

    <visual name='visual'>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <!-- <box size="0.0424 0.0785 0.237"/> -->
        <mesh filename="package://simulation/robot/arm_parts/claw.dae"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="${mass_claw}"/>
      <origin xyz="0 0.015 0.04" rpy="2.5 0 0"/>
      <inertia
        ixx="${mass_claw / 12.0 * (0.02*0.02 + 0.1*0.1)}" ixy="0.0" ixz="0.0"
        iyy="${mass_claw / 12.0 * (0.1*0.1 + 0.02*0.02)}" iyz="0.0"
        izz="${mass_claw / 12.0 * (0.02*0.02 + 0.02*0.02)}"/>
    </inertial>
  </link>


  <joint type="continuous" name="lower_hinge">
    <!-- <limit upper="1.57" lower="-1.57" velocity="5" effort="1000000"/> -->
    <origin xyz="0 0 0.074"/>
    <axis xyz="0 1 0" />
    <child link="upper_arm"/>
    <parent link="base"/>
  </joint>

  <joint type="continuous" name="upper_hinge">
    <!-- <limit upper="1.57" lower="-1.57" velocity="5" effort="10000"/> -->
    <origin xyz="0 0.0 0.507"/>
    <axis xyz="0 1 0" />
    <child link="forearm"/>
    <parent link="upper_arm"/>
  </joint>

  <joint type="revolute" name="forearm_hinge">
    <limit upper="1.57" lower="-1.57" velocity="5" effort="10000"/>
    <origin xyz="0 0.0 0.237"/>
    <axis xyz="0 1 0" />
    <child link="wrist"/>
    <parent link="forearm"/>
  </joint>

  <joint type="revolute" name="wrist_hinge">
    <limit upper="6.28" lower="-6.28" velocity="1" effort="0.5"/>
    <origin xyz="0 0.0 0.107"/>
    <axis xyz="0 0 1" />
    <child link="claw_base"/>
    <parent link="wrist"/>
  </joint>

  <joint type="revolute" name="claw_right_hinge">
    <limit upper="1.57" lower="0" velocity="0.001" effort="5"/>
    <origin xyz="0 -0.04175 0.128"/>
    <axis xyz="1 0 0" />
    <child link="claw_right"/>
    <parent link="claw_base"/>
  </joint>

  <joint type="revolute" name="claw_left_hinge">
    <limit upper="1.57" lower="0" velocity="0.1" effort="5"/>
    <origin xyz="0 0.04175 0.128" rpy="0 0 3.14"/>
    <axis xyz="1 0 0" />
    <child link="claw_left"/>
    <parent link="claw_base"/>
  </joint>

  <joint type="continuous" name="base_hinge">
    <!-- <limit upper="6.28" lower="-6.28" velocity="1" effort="10"/> -->
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <axis xyz="0 0 1" />
    <child link="base"/>
    <parent link="world"/>
  </joint>

  <transmission name="tran1">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="base_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor1">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <transmission name="tran2">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lower_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor2">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <transmission name="tran3">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="forearm_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor3">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <transmission name="tran4">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="wrist_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor4">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <transmission name="tran5">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="upper_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor5">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <transmission name="tran6">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="claw_right_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor6">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  
  <transmission name="tran7">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="claw_left_hinge">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor7">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
</robot>
